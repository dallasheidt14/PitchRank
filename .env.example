# PitchRank Environment Variables Example
# Copy this file to .env and fill in your values

# ============================================
# Database Configuration
# ============================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
USE_LOCAL_SUPABASE=false

# ============================================
# Ranking Engine Configuration
# ============================================

# Layer 1: Time Window
RANKING_WINDOW_DAYS=365
INACTIVE_HIDE_DAYS=180

# Layer 2: Game Limits
MAX_GAMES_PER_TEAM=30
GOAL_DIFF_CAP=6
OUTLIER_GUARD_ZSCORE=2.5

# Layer 3: Recency Weighting
RECENT_K=15
RECENT_SHARE=0.65
DAMPEN_TAIL_START=26
DAMPEN_TAIL_END=30
DAMPEN_TAIL_START_WEIGHT=0.8
DAMPEN_TAIL_END_WEIGHT=0.4

# Layer 4: Defense Ridge
RIDGE_GA=0.25

# Layer 5: Adaptive K
ADAPTIVE_K_ALPHA=0.5
ADAPTIVE_K_BETA=0.6
TEAM_OUTLIER_GUARD_ZSCORE=2.5

# Layer 6: Performance
PERFORMANCE_K=0.15
PERFORMANCE_DECAY_RATE=0.08
PERFORMANCE_THRESHOLD=2.0
PERFORMANCE_GOAL_SCALE=5.0

# Layer 7: Bayesian Shrinkage
SHRINK_TAU=8.0

# Layer 8: Strength of Schedule
UNRANKED_SOS_BASE=0.35
SOS_REPEAT_CAP=2
SOS_ITERATIONS=3
SOS_TRANSITIVITY_LAMBDA=0.20

# Layer 10: Component Weights (must sum to 1.0)
OFF_WEIGHT=0.25
DEF_WEIGHT=0.25
SOS_WEIGHT=0.50

# Provisional Rankings
MIN_GAMES_FOR_RANKING=5

# Context Multipliers
TOURNAMENT_KO_MULT=1.10
SEMIS_FINALS_MULT=1.05

# Cross-Age Anchoring
ANCHOR_PERCENTILE=0.98

# Normalization
NORM_MODE=percentile

# ============================================
# Machine Learning Layer Configuration
# ============================================
ML_LAYER_ENABLED=true
ML_ALPHA=0.12
ML_RECENCY_DECAY_LAMBDA=0.06
ML_MIN_TEAM_GAMES=6
ML_RESIDUAL_CLIP=3.5
ML_NORM_MODE=percentile
ML_LOOKBACK_DAYS=365

# XGBoost Parameters
ML_XGB_N_ESTIMATORS=220
ML_XGB_MAX_DEPTH=5
ML_XGB_LEARNING_RATE=0.08
ML_XGB_SUBSAMPLE=0.9
ML_XGB_COLSAMPLE_BYTREE=0.9
ML_XGB_REG_LAMBDA=1.0
ML_XGB_N_JOBS=-1

# Random Forest Parameters
ML_RF_N_ESTIMATORS=240
ML_RF_MAX_DEPTH=18
ML_RF_MIN_SAMPLES_LEAF=2
ML_RF_N_JOBS=-1

# ============================================
# System Configuration
# ============================================
LOG_LEVEL=INFO
USE_CACHE=true
PARALLEL_PROCESSING=true
DEBUG_MODE=false

# ============================================
# Web Scraping
# ============================================
# ZenRows API (for web scraping)
ZENROWS_API_KEY=your-zenrows-api-key

# ============================================
# Frontend Environment Variables (SEO & Analytics)
# ============================================
# Site URL - used for SEO metadata, sitemaps, and canonical URLs
NEXT_PUBLIC_SITE_URL=https://pitchrank.io

# Google Analytics 4 (GA4)
# Get your measurement ID from https://analytics.google.com
# Format: G-XXXXXXXXXX
# Leave empty to disable analytics in development
NEXT_PUBLIC_GA_MEASUREMENT_ID=

# ============================================
# Stripe Payment Configuration
# ============================================
# Get your keys from https://dashboard.stripe.com/apikeys
# For production, use live keys (sk_live_, pk_live_)
# For development/testing, use test keys (sk_test_, pk_test_)

# Secret key (server-side only) - NEVER expose this to the client
STRIPE_SECRET_KEY=sk_test_your_secret_key_here

# Publishable key (client-side)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# Webhook signing secret
# Get this from Stripe Dashboard > Developers > Webhooks
# Create a webhook endpoint: https://yourdomain.com/api/stripe/webhook
# Events to listen for:
#   - checkout.session.completed
#   - customer.subscription.updated
#   - customer.subscription.deleted
#   - invoice.paid
#   - invoice.payment_failed
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Price IDs for PitchRank Premium subscription plans
# Create these in Stripe Dashboard > Products
# Product: PitchRank Premium
#   - Monthly: $6.99/month recurring
#   - Yearly: $69.00/year recurring (17% savings)
STRIPE_PRICE_MONTHLY=price_your_monthly_price_id
STRIPE_PRICE_YEARLY=price_your_yearly_price_id

# Client-side price IDs (needed for checkout)
NEXT_PUBLIC_STRIPE_PRICE_MONTHLY=price_your_monthly_price_id
NEXT_PUBLIC_STRIPE_PRICE_YEARLY=price_your_yearly_price_id
